<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Auto Translator Extension</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-text {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>🧪 Test Auto Translator Extension</h1>
    
    <div class="instructions">
        <h3>📋 Hướng dẫn test:</h3>
        <ol>
            <li><strong>Cài đặt Extension:</strong> Load extension vào Chrome</li>
            <li><strong>Cấu hình API:</strong> Nhấp chuột phải vào icon extension > Options, nhập API keys</li>
            <li><strong>Cấu hình popup:</strong> Nhấp vào icon extension, chọn API và ngôn ngữ đích</li>
            <li><strong>Test dịch thủ công:</strong> Bôi đen văn bản bên dưới và nhấn Ctrl+Shift+Y</li>
            <li><strong>Test tự động dịch:</strong> Gõ văn bản vào input và nhấn Tab để blur</li>
        </ol>
    </div>

    <div class="test-section">
        <h3>📝 Test Dịch Thủ Công (Manual Translation)</h3>
        <p>Bôi đen văn bản bên dưới và nhấn <kbd>Ctrl+Shift+Y</kbd>:</p>
        
        <div class="test-text">
            <strong>Văn bản test 1:</strong><br>
            Xin chào, tôi là một extension dịch thuật thông minh. Tôi có thể giúp bạn dịch văn bản từ tiếng Việt sang nhiều ngôn ngữ khác nhau.
        </div>
        
        <div class="test-text">
            <strong>Văn bản test 2:</strong><br>
            Hôm nay trời đẹp quá! Tôi muốn đi dạo phố và thưởng thức một ly cà phê ngon.
        </div>
        
        <div class="test-text">
            <strong>Văn bản test 3:</strong><br>
            Công nghệ trí tuệ nhân tạo đang phát triển rất nhanh. Chúng ta cần học hỏi và thích ứng với những thay đổi này.
        </div>
    </div>

    <div class="test-section">
        <h3>⌨️ Test Tự Động Dịch (Auto Translation)</h3>
        <p>Gõ văn bản tiếng Việt vào các ô bên dưới và nhấn Tab để blur:</p>
        
        <label for="test-input-1">Input Text:</label>
        <input type="text" id="test-input-1" placeholder="Gõ văn bản tiếng Việt ở đây...">
        
        <label for="test-textarea-1">Textarea:</label>
        <textarea id="test-textarea-1" rows="3" placeholder="Gõ đoạn văn dài hơn ở đây..."></textarea>
        
        <label for="test-input-2">Input Text 2:</label>
        <input type="text" id="test-input-2" placeholder="Test input thứ hai...">
    </div>

    <div class="test-section">
        <h3>🔧 Test Các Trường Hợp Đặc Biệt</h3>
        
        <h4>Test không có văn bản được chọn:</h4>
        <p>Nhấn <kbd>Ctrl+Shift+Y</kbd> mà không bôi đen văn bản nào để xem thông báo lỗi.</p>
        
        <h4>Test không có API key:</h4>
        <p>Xóa API key trong Options và thử dịch để xem thông báo lỗi.</p>
        
        <h4>Test văn bản ngắn:</h4>
        <div class="test-text">Xin chào</div>
        
        <h4>Test văn bản dài:</h4>
        <div class="test-text">
            Trí tuệ nhân tạo (AI) đang trở thành một trong những công nghệ quan trọng nhất của thế kỷ 21. 
            Từ việc nhận dạng giọng nói đến xe tự lái, từ chatbot đến hệ thống khuyến nghị, 
            AI đang thay đổi cách chúng ta sống, làm việc và tương tác với thế giới xung quanh. 
            Với sự phát triển không ngừng của machine learning và deep learning, 
            chúng ta có thể mong đợi những tiến bộ đáng kinh ngạc trong tương lai gần.
        </div>
    </div>

    <div class="test-section">
        <h3>📊 Kết Quả Test</h3>
        <p>Kiểm tra các điểm sau:</p>
        <ul>
            <li>✅ Extension load thành công</li>
            <li>✅ Popup mở được và hiển thị giao diện</li>
            <li>✅ Options page mở được và lưu API keys</li>
            <li>✅ Phím tắt Ctrl+Shift+T hoạt động</li>
            <li>✅ Dịch thủ công hoạt động</li>
            <li>✅ Tự động dịch hoạt động</li>
            <li>✅ Thông báo lỗi hiển thị đúng</li>
            <li>✅ Thông báo thành công hiển thị đúng</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>🐛 Debug Information</h3>
        <p>Nếu có lỗi, hãy kiểm tra:</p>
        <ol>
            <li><strong>Console của Extension:</strong> chrome://extensions/ > Details > Inspect views: background page</li>
            <li><strong>Console của trang web:</strong> F12 > Console</li>
            <li><strong>Network tab:</strong> Kiểm tra API calls có thành công không</li>
            <li><strong>Storage:</strong> chrome://extensions/ > Details > Extension options</li>
        </ol>
        
        <h4>🔧 Debug Gemini API 404:</h4>
        <ul>
            <li><strong>Kiểm tra API Key:</strong> Đảm bảo API key bắt đầu bằng "AIza" hoặc "ya29"</li>
            <li><strong>Test API Key:</strong> Sử dụng nút "Test Gemini" trong Options page</li>
            <li><strong>Kiểm tra Console:</strong> Xem log để biết model nào đang được thử</li>
            <li><strong>Thử model khác:</strong> Extension sẽ tự động thử các model khác nhau</li>
            <li><strong>Kiểm tra quota:</strong> Đảm bảo API key còn quota</li>
        </ul>
        
        <h4>📋 Các model Gemini được hỗ trợ:</h4>
        <ul>
            <li>gemini-1.5-pro (chất lượng cao, khuyến nghị)</li>
            <li>gemini-1.0-pro (ổn định)</li>
            <li>gemini-pro (cơ bản)</li>
            <li>gemini-pro-vision (hỗ trợ hình ảnh)</li>
        </ul>
        
        <h4>⚠️ Lưu ý quan trọng:</h4>
        <ul>
            <li><strong>Model cũ không còn hỗ trợ:</strong> gemini-1.5-flash, gemini-2.0-flash-exp</li>
            <li><strong>API Version:</strong> Sử dụng v1beta</li>
            <li><strong>Fallback:</strong> Extension sẽ tự động thử các model khác nếu model hiện tại lỗi 404</li>
        </ul>
    </div>

    <script>
        // Add some test functionality
        console.log('🧪 Test page loaded for Auto Translator Extension');
        
        // Log when inputs are focused/blurred for debugging
        document.querySelectorAll('input, textarea').forEach(input => {
            input.addEventListener('focus', () => {
                console.log('Input focused:', input.id);
            });
            input.addEventListener('blur', () => {
                console.log('Input blurred:', input.id, 'Value:', input.value);
            });
        });
        
        // Log selection changes
        document.addEventListener('selectionchange', () => {
            const selection = window.getSelection();
            if (selection.toString().trim()) {
                console.log('Text selected:', selection.toString().trim());
            }
        });
    </script>
</body>
</html>
